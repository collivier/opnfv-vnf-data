#!/bin/vbash
source /opt/vyatta/etc/functions/script-template

configure
set protocols static route {{have_addr}} blackhole distance 1
set protocols static route {{have_addr2}} blackhole distance 1
set protocols static route {{have_addr3}} blackhole distance 1
set protocols static route {{have_addr4}} blackhole distance 1
set protocols static route {{have_addr5}} blackhole distance 1
set protocols static route {{have_addr6}} blackhole distance 1
set protocols static route {{have_addr7}} blackhole distance 1
set protocols static route {{have_addr8}} blackhole distance 1
set protocols static route {{have_addr9}} blackhole distance 1
set protocols static route {{have_addr10}} blackhole distance 1
commit
set protocols bgp {{ origin_as }} neighbor {{ ipv4_neighbor }} ebgp-multihop '2'
set protocols bgp {{ origin_as }} neighbor {{ ipv4_neighbor }} remote-as {{ peer_as }}
set protocols bgp {{ origin_as }} neighbor {{ ipv4_neighbor }} update-source {{ipv4_origin}}
set protocols bgp {{ origin_as }} neighbor {{ ipv4_neighbor }} soft-reconfiguration inbound
set protocols bgp {{ origin_as }} neighbor {{ ipv4_neighbor }} password lab0033
set protocols bgp {{ origin_as }} network {{have_addr}}
set protocols bgp {{ origin_as }} network {{have_addr2}}
set protocols bgp {{ origin_as }} network {{have_addr3}}
set protocols bgp {{ origin_as }} network {{have_addr4}}
set protocols bgp {{ origin_as }} network {{have_addr5}}
set protocols bgp {{ origin_as }} network {{have_addr6}}
set protocols bgp {{ origin_as }} network {{have_addr7}}
set protocols bgp {{ origin_as }} network {{have_addr8}}
set protocols bgp {{ origin_as }} network {{have_addr9}}
set protocols bgp {{ origin_as }} network {{have_addr10}}
set protocols bgp {{ origin_as }} parameters router-id {{ipv4_origin}}
commit
